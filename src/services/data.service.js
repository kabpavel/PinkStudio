
import { storageService } from './async-storage.service.js'
import { utilService } from './util.service.js'

const STORAGE_KEY = 'data'
const listeners = []

saveDefaultData()

const gData =[{
        _id: "61b364458ddd74002ee2d48d",
        entityType: "homePage",
        title: "×”×¦×¢×“×™× ×”×¨××©×•× ×™× ×©×œ×š ×‘×¢×•×œ× ×”×©×™×¨×”",
        title2: "×”×¦×¢×“×™× ×”×¨××©×•× ×™× ×©×œ×š ×‘×¢×•×œ× ×”×©×™×¨×”",
        description1: "×©×™×¢×•×¨×™ ×¤×™×ª×•×— ×§×•×œ ×¢× ×™×¤×¢×ª ×’×•×œ×Ÿ ×–×ž×¨×ª ×•×ž×•×¨×” ×ž×§×¦×•×¢×™×ª ×œ×¤×™×ª×•×— ×§×•×œ ×œ×ž×ª×—×™×œ×™× ×•×œ×ž×ª×§×“×ž×™×",
        description2: "×©×™×¢×•×¨×™ ×¤×™×ª×•×— ×§×•×œ ×¢× ×™×¤×¢×ª ×’×•×œ×Ÿ ×–×ž×¨×ª ×•×ž×•×¨×” ×ž×§×¦×•×¢×™×ª ×œ×¤×™×ª×•×— ×§×•×œ ×œ×ž×ª×—×™×œ×™× ×•×œ×ž×ª×§×“×ž×™×",
        back_ground_img1: "back_ground_img1.png",
        img1Url: "teacher_img1.png",
        isInfoList: false,
        routePath: "home"
    },
    {
        _id: "61b0f4e68dff8605aef78907",
        entityType: "teacher",
        title: "×”×ž×•×¨×”",
        title2: "×”×ž×•×¨×”",
        description1: "×”×›×™×¨×• ××ª ×™×¤×¢×ª ×’×•×œ×Ÿ ×ž×™×™×¡×“×ª pink studio ×–×ž×¨×ª ×•×ž×•×¨×”  ×ž×•×¡×ž×›×ª ×œ×¤×™×ª×•×— ×§×•×œ ×‘×¢×œ×ª ×ª×•××¨ ×¨××©×•×Ÿ ×•×ª×¢×•×“×ª ×”×•×¨××” ×‘×ž×•×–×™×§×” ×¨×‘ ×ª×—×•×ž×™×ª.",
        description2: "×¨×•×¦×™× ×œ×œ×ž×•×“ ×œ×©×™×¨ ðŸŽ‰ðŸŽŠðŸ‘¨â€ðŸŽ¤×©×ž×™ ×™×¤×¢×ª  ×ž×•×¨×” ×œ×¤×™×ª×•×— ×§×•×œ, ×•×©×™×¨×” ×‘×•×’×¨×ª ×”××§×“×ž×™×” ×•×‘×¢×œ×ª ×ª×¢×•×“×ª ×”×•×¨××” ×ž×ž×©×¨×“ ×”×—×™× ×•×š  ×”×œ×™×ž×•×“×™× ×‘×¡×˜×•×“×™×• ×›×•×œ×œ×™× :ðŸŽ¼ðŸŽ™ï¸ ×œ×™×ž×•×“ ×‘×›×œ ×”×¨×ž×•×ª ×•×”×’×™×œ××™×ðŸŽ™ï¸ðŸŽ¼ ×¡×‘×™×‘×ª ×œ×™×ž×•×“ × ×¢×™×ž×” ×‘×™×ª×™×ª ×•×ª×•×ž×›×ª ×‘××•×œ×¤×Ÿ ðŸŽ™ï¸ðŸŽ¼×”×ª××ž×ª ×ª×›× ×™×ª ××™×©×™×ª ×œ×›×œ ×ª×œ×ž×™×“/×”ðŸŽ¼ðŸŽ™ï¸×ž×ª×Ÿ ×›×œ×™× ×œ×¤×™×ª×•×— ×‘×”×ž×©×š ×”×“×¨×š.ðŸŽ¼ðŸŽ™ï¸ ×—×©×™×¤×” ×œ×¡×’× ×•× ×•×ª ×ž×•×–×™×§×œ×™×™× ×¨×‘×™× ×•×ž×¦×™××ª ×”×§×•×œ ×”××™×©×™ ×”×™×™×—×•×“×™ ×œ×š â­ðŸŽ¤â­×™×¤×¢×ª ×’×•×œ×Ÿ ×–×ž×¨×ª ×•×ž×•×¨×” ×ž×•×¡×ž×›×ª ×•×ž× ×•×¡×” ×œ×¤×™×ª×•×— ×§×•×œ ×‘×¢×œ×ª ×ª×•××¨ ×¨××©×•×Ÿ ×‘×ž×•×–×™×§×” ×¨×‘ ×ª×—×•×ž×™×ª ×‘×•×’×¨×ª ×”×§×¨×™×” ×”××§×“×ž×™×ª ××•× ×• ×•×ª×¢×•×“×ª ×”×•×¨××” ×ž×ž×›×œ×œ×ª ×•×•×©×™× ×’×˜×•×Ÿ ×‘×¢×œ×ª × ×™×¡×™×•×Ÿ ×ž×©× ×ª .2016 .×ž×•×¨×” ×œ×ž×•×–×™×§×” ×‘×‘×ª×™ ×¡×¤×¨ ×™×¡×•×“×™×™× ×‘×ž×©×¨×“ ×”×—×™× ×•×š ×•×ž×ª×ž×—×” ×‘×ž×—×–×•×ª ×–×ž×¨ ×‘×•×’×¨×ª ×ž×—×–×•×ª ×–×ž×¨ ×‘×™×”\"×¡ ×¢× ×ª ×‘×¨×–×™×œ×™ ×‘×¢×œ×ª ×ª×¢×•×“×” ×œ×”×•×¨××ª ×¤×™×ª×•×— ×§×•×œ - ×¡×˜×•×“×™×• ××¨×ž×ª ××¨× ×”×™×™× ×•×•×§×•×œ×•×’×™×ª ×•×ž×•×¨×” ×œ×¤×™×ª×•×— ×§×•×œ. ×œ×¤×¨×˜×™× × ×•×¡×¤×™×, ×¦×¨×• ×§×©×¨ ×¢×›×©×™×•  0523573983",
        back_ground_img1: "",
        img1Url: "teacher_img1.png",
        isInfoList: true,
        routePath: "teacher"
    },
    {
        _id: "61b131c3cf7a36222c5e7330",
        entityType: "studio",
        title: "×”×¡×˜×•×“×™×•",
        title2: "×”×¡×˜×•×“×™×•",
        description1: "×‘×•××• ×œ×œ×ž×•×“ ×œ×©×™×¨  ×‘×¡×˜×•×“×™×• ×ž××•×‘×–×¨  ×‘××•×•×™×¨×” ×ž×•×–×™×§×œ×™×ª ×§×¡×•×ž×” ×©×¨×™×  ×‘×›×œ ×”×¡×’× ×•× ×•×ª ×•×‘×›×œ ×”×¨×ž×•×ª ×ž×ž×ª×—×™×œ×™× ×¢×“ ×ž×ª×§×“×ž×™× ",
        description2: "×”×¡×˜×•×“×™×• × ×•×¡×“ ×¢×œ ×™×“×™ ×™×¤×¢×ª ×’×•×œ×Ÿ ×–×ž×¨×ª ×•×ž×•×¨×” ×ž×•×¡×ž×›×ª ×œ×¤×™×ª×•×— ×§×•×œ  ×”×¡×˜×•×“×™×•  ×ž×ž×•×§× ×‘×¤×¨×“×¡ ×—× ×” ×™×¤×” × ×•×£ ×©×™×¢×•×¨×™ ×¤×™×ª×•×— ×”×§×•×œ -×”× ×œ×ž×ª×—×™×œ×™× ×•×œ×ž×ª×§×“×ž×™× ×•×ž×ª××™×ž×™× ×œ×›×œ ×”×¨×ž×•×ª ×—×•×’×™ ×”×ž×•×–×™×§×” ×œ×§×˜× ×˜× ×™× -×”×ª×›× ×™×ª ×ž×™×•×¢×“×ª ×œ×™×œ×“×™× ×‘×’×™×œ ×”×¨×š ×ž×’×™×œ 3-6 ×”×©×™×¢×•×¨×™× ×‘××•×•×™×¨×” ×§×¡×•×ž×” ×œ×ª×™××•× ×¦×¨×• ×§×©×¨ ×‘×˜×œ×¤×•×Ÿ:0523573983 ",
        back_ground_img1: "",
        img1Url: "studio_img1.png",
        isInfoList: true,
        routePath: "studio"
    },
    {
        _id: "61b32ede60893b0eb38af5c3",
        entityType: "vocalCoach",
        title: "×¤×™×ª×•×— ×§×•×œ",
        title2: "×¤×™×ª×•×— ×§×•×œ",
        description1: "×× ×œ×©×™×¨ ×–×” ×”×—×œ×•× ×©×œ×š- ×”×’×¢×ª ×œ×ž×§×•× ×”× ×›×•×Ÿ ×‘×•× × ×’×œ×” ×‘×™×—×“ ××ª ×”×§×•×œ ×”×˜×‘×¢×™ ×•×”×™×™×—×•×“×™ ×”×›×œ×™ ×”×ž×¤×œ×™× ×©×ž×¡×ª×ª×¨ ×‘×ª×•×›×š",
        description2: "×ž×˜×¨×ª ×”×§×•×¨×¡ ×”×™× ×œ×”×›×©×™×¨ ×–×ž×¨×™× ××• ×—×•×‘×‘×™ ×©×™×¨×”  ×œ×”×™×•×ª ×”×›×•×›×‘×™× ×”×‘××™× ×›××œ×” ×©×”×©×™×¨×” ×‘××” ×ž×”× ×©×ž×”. ×‘×§×•×¨×¡ ×œ×•×ž×“×™× ×œ×”×‘×™×Ÿ, ×œ×¨××•×ª, ×œ×©×ž×•×¢ ×•×œ×”×¨×’×™×© ××ª ×”×ª×œ×ž×™×“, ×›×“×™ ×œ×”×’×™×¢ ×œ×¨×ž×” ×’×‘×•×”×” ×©×œ ×ª×ž×™×›×” ×•×§×™×“×•× ×œ×›×œ ××—×“ ×ž×’×™×¢ ×œ×©×™×¨ ×ž×”×œ×‘.×‘×™×™×‘×™ ×•×™×™×¡- ×§×•×¨×¡ ×œ×–×ž×¨×™× ×ž×ª×—×™×œ×™× ×‘×©×™×¢×•×¨×™ ×¤×™×ª×•×— ×”×§×•×œ × ×œ×ž×“:×›×™×¦×“ ×œ×©×œ×•×˜ ×‘×ž×™×ª×¨×™ ×”×§×•×œ ×•×œ×¤×ª×— ×™×¦×™×‘×•×ª ×§×•×œ×™×ª.×ª×¨×’×™×œ×™ × ×©×™×ž×”, ×”×•×œ×›×ª ××•×™×¨ ×•×—×™×–×•×§ ×”×¡×¨×¢×¤×ª.×”×’×™×™×” × ×›×•× ×”, ×ª×ž×™×›×”, ×“×™×§×¦×™×”.×¤×™×ª×•×— ×©×ž×™×¢×”, ×§×¦×‘ ×•×”×¨×—×‘×ª ×”×ž× ×¢×“ ×”×§×•×œ×™.×ž××™×¤×” ×©×¨×™× ×•×ž×‘× ×” ×ž× ×’× ×•×Ÿ ×”×§×•×œ.×¡×•×œ×¤×’', ×”×¨×ž×•× ×™×” ×§×•×œ×™×ª, ×”×‘×¢×” ××™×©×™×ª.×”×œ×—× ×” ×•×‘× ×™×™×ª ×ž×©×¤×˜×™× ×ž×•×–×™×§×œ×™×™×.×›×™×¦×“ ×œ×”×’×™×© ××ª ×”×©×™×¨.×”×©×™×¢×•×¨×™× ×ž×œ×•×•×™× ×‘×ª××•×¨×™×” ×•×§×¨×™××ª ×ª×•×•×™×.×ž×©×š ×”×©×™×¢×•×¨ 45 ××• 60 ×“×§×•×ª.×©×™×¢×•×¨ ×”×™×›×¨×•×ª ×¨××©×•×Ÿ  ×‘×¢×œ×•×ª ×ž×•×–×œ×ª.×¡×•×¤×¨ ×¡×˜××¨ â€“ ×§×•×¨×¡ ×œ×–×ž×¨×™× ×ž×ª×§×“×ž×™× ×‘×©×™×¢×•×¨×™ ×¤×™×ª×•×— ×”×§×•×œ × ×œ×ž×“ ×¢×œ  ×ª×¨×’×™×œ×™ × ×©×™×ž×” ×—×™×–×•×§ ×”×¡×¨×¢×¤×ª ×¤×™×ª×•×— ×™×¦×™×‘×•×ª ×§×•×œ×™×ª ×¤×™×ª×•×— ×©×ž×™×¢×” ×•×§×¦×‘ ×”×¨×—×‘×ª ×”×ž× ×¢×“ ×”×§×•×œ×™ ×ž×‘× ×” ×ž× ×’× ×•×Ÿ ×”×§×•×œ ×”×œ×—× ×” ×•×‘× ×™×™×ª ×ž×©×¤×˜×™× ×ž×•×–×™×§×œ×™×™× .×›×™×¦×“ ×œ×”×’×™×© ××ª ×”×©×™×¨ ×™×¦×™×¨×ª ×¡×’× ×•×Ÿ ×•×‘×™×˜×•×™ ××™×©×™×”×©×™×¢×•×¨×™× ×ž×œ×•×•×™× ×‘×ª××•×¨×™×” ×•×§×¨×™××ª ×ª×•×•×™× .×ž×©×š ×”×©×™×¢×•×¨ 45 ××• 50 ×“×§×•×ª ×©×™×¢×•×¨ ×”×™×›×¨×•×ª ×¨××©×•×Ÿ ×‘×¢×œ×•×ª ×ž×•×–×œ×ª ×œ×¤×¨×˜×™× × ×•×¡×¤×™× ×¦×¨×• ×§×©×¨ ×¢×›×©×™×•-ðŸ¤³ðŸ½0523573983",
        back_ground_img1: "",
        img1Url: "vocal_coach_img1.png",
        isInfoList: true,
        routePath: "vocal-couch"
    },
    {
        _id: "61b33ae1f12a521350fb3975",
        entityType: "musicLittleOnes",
        title: "×ž×•×–×™×§×” ×œ×§×˜× ×˜× ×™×",
        title2: "×—×•×’×™ ×ž×•×–×™×§×” ×œ×§×˜× ×˜× ×™×",
        description1: "×‘×•××• ×œ×”×¢× ×™×§ ×œ×™×œ×“×™×›× ×ž×¡×¢ ×ž×•×–×™×§×œ×™ ×‘×œ×ª×™ × ×©×›×— ×•×œ×¡×™×™×¢ ×œ×”× ×œ×’×œ×•×ª ××ª ×¢×•×œ× ×”×ž×•×–×™×§×” .",
        description2: "×¨×•×¦×™× ×œ×”×¢× ×™×§ ×ž×ª× ×” ðŸŽ×œ×›×, ×œ×‘×Ÿ ××• ×œ×‘×ª ×©×œ×›×? ×‘×ž×™×•×—×“ ×œ×¨×’×œ ×”×—×’×™×\nðŸŒ¸ðŸŽ¼  ×—×•×’×™ ×ž×•×–×™×§×” ×œ×’×™×œ ×”×¨×š \nðŸŽ¼ðŸŽ¹ðŸŽ¤ðŸ¥³ðŸ’ƒðŸ¥³ ×©×ž×™  ×™×¤×¢×ª ×’×•×œ×Ÿ ×ž×•×¨×” ×œ×¤×™×ª×•×— ×§×•×œ, ×•×©×™×¨×” ×‘×•×’×¨×ª ×”××§×“×ž×™×” ×•×‘×¢×œ×ª ×ª×¢×•×“×ª ×”×•×¨××” ×ž×ž×©×¨×“ ×”×—×™× ×•×š.\nðŸŽ™ï¸×¤×™×ª×•×— ×‘×™×˜×—×•×Ÿ ×¢×¦×ž×™ \nðŸŽ¼ðŸŽ\nðŸŽ™ï¸×™×›×•×œ×ª ×¢×ž×™×“×” ×ž×•×œ ×§×”×œ\nðŸŽ¼ðŸŽ™ï¸×¡×‘×™×‘×ª ×œ×™×ž×•×“ × ×¢×™×ž×” \nðŸŽ¼ðŸŽ™ï¸××¨×’×– ×›×œ×™× ×œ×¤×™×ª×•×— ××™×©×™ ×œ×™×œ×“×›×.\nðŸŽ¼ðŸŽ™ï¸ ×—×©×™×¤×” ×œ×¡×’× ×•× ×•×ª ×ž×•×–×™×§×œ×™× ×¨×‘×™×\nðŸŽ¼ ×ž×—×¤×©×™× ×—×•×•×™×” ×‘×œ×¢×“×™×ª ×œ×™×œ×“×›× ×”×’×¢×ª× ×œ×ž×§×•× ×”× ×›×•×Ÿ  \nðŸŽ¼ðŸŽ¤ðŸŽ¹ ×œ×¤×¨×˜×™× × ×•×¡×¤×™× ×¦×¨×• ×§×©×¨ ×¢×›×©×™×• \nðŸ¤³ðŸ½ ×™×¤×¢×ª 0523573983",
        back_ground_img1: "",
        img1Url: "for_little_img1.png",
        isInfoList: true,
        routePath: "music-little-ones"
    },
    {
        _id: "61b33b16f12a521350fb3977",
        entityType: "ladino",
        title: "×œ××“×™× ×•",
        title2: "×”×•×¤×¢×•×ª ×©×™×¨×ª ×œ××“×™× ×•",
        description1: "×”×•×¤×¢×” ×™×™×—×•×“×™×ª ×©×œ ×©×™×¨×™× ×•× ×™×—×•×— ×©×œ ×¡×¤×¨×“ ×¢× ×©×™×¨×™ ×œ××“×™× ×•..",
        description2: "×œ× ×›×“××™ ×œ×›× ×œ×¤×¡×¤×¡×”×•×¤×¢×” ×ž×“×”×™×ž×” ×•× ×•×¦×¦×ª ×©×œ ×–×ž×¨×ª ×•×¤×¡× ×ª×¨×Ÿ ×—×•×•×™×” ×ž×™×•×—×“×ª, ×ž×¡×¢×™×¨×” ×•×ž×¨×ª×§×ª.. ×”×•×¤×¢×” ×©×¢×“×™×™×Ÿ ×œ× × ×¨××ª×” ×‘×™×©×¨××œ.×”×•×¤×¢×” ×™×™×—×•×“×™×ª ×©×œ ×©×™×¨×™× ×•× ×™×—×•×— ×©×œ ×¡×¤×¨×“ ×¢× ×©×™×¨×™ ×œ××“×™× ×•..",
        back_ground_img1: "",
        img1Url: "ladino_img1.png",
        isInfoList: true,
        routePath: "ladino-performance"
    },
    {
        _id: "61b33b16f12a521350fb3947",
        entityType: "disneySongs",
        title: "×©×™×¨×™ ×“×™×¡× ×™",
        title2: "×©×™×¨×™ ×“×™×¡× ×™",
        description1: "×œ×ž×™×˜×‘ ×©×™×¨×™ ×”×“×™×¡× ×™ ×”××”×•×‘×™× ×‘×™×•×ª×¨ ×‘×›×œ ×”×–×ž× ×™×",
        description2: "×œ× ×›×“××™ ×œ×›× ×œ×¤×¡×¤×¡ ×œ×ž×™×˜×‘ ×©×™×¨×™ ×”×“×™×¡× ×™ ×”××”×•×‘×™× ×‘×™×•×ª×¨ ×‘×›×œ ×”×–×ž× ×™××”×•×¤×¢×” ×ž×“×”×™×ž×” ×•× ×•×¦×¦×ª ×©×œ ×–×ž×¨×ª ×•×¤×¡× ×ª×¨×Ÿ ×—×•×•×™×” ×ž×™×•×—×“×ª, ×ž×¡×¢×™×¨×” ×•×ž×¨×ª×§×ª.. ×”×•×¤×¢×” ×©×¢×“×™×™×Ÿ ×œ× × ×¨××ª×” ×‘×™×©×¨××œ.×”×•×¤×¢×” ×™×™×—×•×“×™×ª ×©×œ ×©×™×¨×™× ×¢× × ×’×™×¢×” ×©×œ ×˜×¢× ×”×™×œ×“×•×ª - ×©×™×¨×™ ×“×™×¡× ×™ ×”×ž×™×•×—×“×™×",
        back_ground_img1: "",
        img1Url: "disney_songs_img1.png",
        isInfoList: true,
        routePath: "disney-songs"
    },   
    {
        _id: "61b363f88ddd74002ee2d48b",
        entityType: "contactUs",
        title: "×¦×•×¨ ×§×©×¨",
        title2: "×¦×•×¨ ×§×©×¨",
        description1: "\"×¤×™× ×§ ×¡×˜×•×“×™×•\" - ×¡×˜×•×“×™×• ×œ×¤×™×ª×•×— ×§×•×œ ×•×ž×•×–×™×§×”  ×”×ž×ž×•×§× ×‘×¤×¨×“×¡ ×—× ×” ×™×¤×” × ×•×£. ×œ×¤×¨×˜×™× × ×•×¡×¤×™× ×¦×¨×• ×§×©×¨ ×¢×›×©×™×• - 0523573983",
        description2: "\"×¤×™× ×§ ×¡×˜×•×“×™×•\" - ×¡×˜×•×“×™×• ×œ×¤×™×ª×•×— ×§×•×œ ×•×ž×•×–×™×§×”  ×”×ž×ž×•×§× ×‘×¤×¨×“×¡ ×—× ×” ×™×¤×” × ×•×£. ×œ×¤×¨×˜×™× × ×•×¡×¤×™× ×¦×¨×• ×§×©×¨ ×¢×›×©×™×• - 0523573983",
        img1Url: "contact-us-img1.png",
        isInfoList: true,
        routePath: "contact-us"
    }
    ]

export const dataService = {
    query,
    getById,
    save,
    remove
}
window.cs = dataService;

function query() {
    return storageService.query(STORAGE_KEY)
}
function getById(dataId) {
    return storageService.get(STORAGE_KEY, dataId)
}
function remove(dataId) {
    // return new Promise((resolve, reject) => {
    //     setTimeout(reject, 2000)
    // })
    // return Promise.reject('Not now!');
    return storageService.remove(STORAGE_KEY, dataId)
}

function save(data) {
    if (data._id) {
        return storageService.put(STORAGE_KEY, data)
    } else {
        return storageService.post(STORAGE_KEY, data)
    }
}

function saveDefaultData() {
    //console.log('saveDefaultData',saveDefaultData)
    storageService.query(STORAGE_KEY)
        .then(data => {
            //console.log('data',data)
            if (!data | data.length === 0) {
                storageService.postMany(STORAGE_KEY, gData)
            }
        })
}

function _notifySubscribersDataChanged(data) {
    //console.log('Notifying Listeners');
    listeners.forEach(listener => listener(data))
}

window.addEventListener('storage', () => {
    //console.log('Storage Changed from another Browser!');
    query()
        .then(data => {
            _notifySubscribersDataChanged(data)
        })
})

// TEST DATA
// storageService.post(STORAGE_KEY, {vendor: 'Subali Rahok 2', price: 980}).then(x => //console.log(x))




